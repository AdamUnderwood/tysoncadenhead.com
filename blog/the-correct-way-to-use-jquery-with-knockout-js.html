<!DOCTYPE html>
<!--[if IE 6]>
    <html id="ie6" lang="en-US">
<![endif]-->
<!--[if IE 7]>
    <html id="ie7" lang="en-US">
<![endif]-->
<!--[if IE 8]>
    <html id="ie8" lang="en-US">
<![endif]-->
<!--[if !(IE 6) | !(IE 7) | !(IE 8)  ]><!-->
    <html lang="en-US">
<!--<![endif]-->
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="google-site-verification" content="AeV4w7EOhEv3lU1OT8KOM7jRS0C6jDAsZyMaG38t1g4" />
        <meta property="og:image" content="http://www.tysoncadenhead.com/images/blog/the-correct-way-to-use-jquery-with-knockout-js.jpg"/>
        <meta property="og:title" content="The Correct Way To Use JQuery With Knockout"/>
        <meta property="og:url" content="http://www.tysoncadenhead.com"/>
        <meta property="og:site_name" content="Tyson Cadenhead"/>
        <meta property="og:description" content="Thoughts on productivity, web apps and JavaScript" />
        <title>The Correct Way To Use JQuery With Knockout</title>
        <link rel="shortcut icon" href="/images/favicon.ico" /> 
        <link rel="stylesheet" href="/css/app.css" />
        <link rel="alternate" type="application/rss+xml" title="The Correct Way To Use JQuery With Knockout Thoughts on productivity, web apps and JavaScript" href="http://www.tysoncadenhead.com/feed.xml" />
    </head>
    <body>
        <script type="text/javascript">

          var _gaq = _gaq || [];
          _gaq.push(['_setAccount', 'UA-19696495-1']);
          _gaq.push(['_trackPageview']);
        
          (function() {
            var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
            ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
            var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
          })();
        
        </script>
        <div id="fb-root"></div>
        <div class="header" id="top">
            <div class="container">
                <div class="span12">
                    <div class="span4 left">
                        <h1 id="logo"><a href="/"><img src="/images/logo.png" /></a></h1>
                    </div>
                    <div class="span6 right">
                        <div class="navbar navbar-inverse">
                            <div class="navbar-inner right">
                                <ul class="nav right">
                                  <li><a href="/">Blog</a></li>
                                  <li><a href="/presentations">Presentations</a></li>
                                  <li><a href="/about">About Me</a></li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="container">
            <div class="span12">
                
                    
                    
                        
                        <article>

    <div class="well span2 right thumbnail">
      <img src="/images/blog/the-correct-way-to-use-jquery-with-knockout-js.jpg" />
    </div>

    <h1>The Correct Way To Use JQuery With Knockout</h1>

    

    <h5><span class="label label-info"><a href="/?category=code">code</a></span> | 3-12-2014</h5>

    <p>There has been a lot of buzz around whether or not jQuery is needed for building web applications anymore. Many blog posts have sprung up about how to do common things that are typically done with jQuery just using vanilla JavaScript. While it is important to know where jQuery is needed and where a leaner solution could provide a quicker load time and less complexity, for most large-scale projects, the last thing you want to be worrying about is optimizing against various browser types and nuances.</p>
<p>Reactive frameworks such as Knockout may seem on the surface to work pretty well without needing jQuery at all, but as you get deeper into complex interfaces, you might find yourself needing something such as a jQuery UI component. So where should jQuery and DOM interaction go in a well-structured Knockout application?</p>
<!-- more -->

<h2>Don&#39;t Do DOM Manipulation On Observables</h2>
<p>A rookie mistake is to treat Knockout like other frameworks and try to change the DOM elements without it. For example:</p>
<pre><code class="language-js">var person = {
    name: ko.observable(&#39;Tyson Cadenhead&#39;)
};
var $person = $(&#39;&lt;div /&gt;&#39;, {
    &#39;data-bind&#39;: &#39;{ text: name }&#39;
})
ko.applyBindings(person, $person[0]);</code></pre>
<p>Will work fine, but if you do something like:</p>
<pre><code class="language-js">$person.html(&#39;Batman&#39;);</code></pre>
<p>you are basically overwriting the Knockout functionality. That is no good.</p>
<h2>jQuery Doesn&#39;t Belong In Your ViewModels, Models or Collections</h2>
<p>One of the best selling points of Knockout besides getting developers out of the humdrum of repetitive DOM manipulation is that when it is written well, it is very easy to unit test. As you probably know, unit testing the DOM is not just difficult, it is also slow and unproductive. A viewModel like this would be easy to test:</p>
<pre><code class="language-js">var person = {
    firstName: ko.observable(&#39;Tyson&#39;),
    lastName: ko.observable(&#39;Cadenhead&#39;),
    save: function () {
        var json = {
            firstName: this.firstName(),
            lastName: this.lastName()
        };
        return json;
    }
};</code></pre>
<p>However, this is difficult to test:</p>
<pre><code class="language-js">var person = {
    firstName: ko.observable(&#39;Tyson&#39;),
    lastName: ko.observable(&#39;Cadenhead&#39;),
    openDate: function () {
        $(&#39;#datepicker&#39;).datepicker();
    }
};</code></pre>
<p>The only way to test whether the datepicker was opened or not is to query the DOM. There must be a better way!</p>
<h2>Custom Bindings To The Rescue!!!</h2>
<p>Knockout allows you to write your own custom bindings. These bindings work just like any of the bindings Knockout gives you out of the box such as <code>text</code>, <code>value</code>, etc...</p>
<p>It might seem a little intimidating to write your own bindings, but let me assure you that it is actually a breeze. So, let&#39;s take our datepicker example above and refactor it into a custom binding. The binding itself would be as simple as this:</p>
<pre><code class="language-js">ko.bindingHandlers.datepicker = {

    init: function(el, valueAccessor, allBindings, data, context) {
        $(el).datepicker(data.modalOptions);
    }

};</code></pre>
<p>Now, you just need to update your template to use the new datepicker custom binding:</p>
<pre><code class="language-html">&lt;div&gt;
    &lt;input data-bind=&quot;{
        datapicker: {}
    }&quot; /&gt;
&lt;/div&gt;</code></pre>
<p>You can also pass in data to the custom binding like this:</p>
<pre><code class="language-html">&lt;div&gt;
    &lt;input data-bind=&quot;{
        datapicker: {
            numberOfMonths: 3
        }
    }&quot; /&gt;
&lt;/div&gt;</code></pre>
<p>That&#39;s really all there is to it. Using this approach, you can get the jQuery out of your viewModels and make your viewModels more testable and more clean.</p>
<p>As it turns out, jQuery works really well with Knockout as long as it is done right.</p>
<p>If you want to see an example of this, checkout this <a href="http://jsfiddle.net/22f2z/">JSFiddle</a>.</p>


    <h5>Tags: 
    
        <span class="label">
            <a href="/?tag=knockout">knockout</a>
        </span>
    
        <span class="label">
            <a href="/?tag=jquery">jquery</a>
        </span>
    
        <span class="label">
            <a href="/?tag=javascript">javascript</a>
        </span>
    
    </h5>

    <br />

    <div class="google-things">

        <style>
        .responsive-unit { width: 320px; height: 50px; }
        @media(min-width: 500px) { .responsive-unit { width: 468px; height: 60px; } }
        @media(min-width: 800px) { .responsive-unit { width: 728px; height: 90px; } }
        </style>
        <script async src="http://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <!-- Responsive unit -->
        <ins class="adsbygoogle responsive-unit"
             style="display:inline-block"
             data-ad-client="ca-pub-5130799763611680"
             data-ad-slot="1789954798"></ins>
        <script>
        (adsbygoogle = window.adsbygoogle || []).push({});
        </script>

    </div>

    <br />

    <!--
    <h4>Related Posts:</h4>
    <div id="related-posts" class="clear">
        <div class="well left thumbnail"></div>
        <div class="well left thumbnail"></div>
        <div class="well left thumbnail"></div>
    </div>
    -->

</article>

<div class="share">
    <div class="addthis_toolbox addthis_default_style addthis_32x32_style">
        <a class="addthis_button_preferred_1"></a>
        <a class="addthis_button_preferred_2"></a>
        <a class="addthis_button_preferred_3"></a>
        <a class="addthis_button_preferred_4"></a>
        <a class="addthis_button_compact"></a>
        <a class="addthis_counter addthis_bubble_style"></a>
    </div>
</div>

<div class="fb-comments" data-href="http://www.tysoncadenhead.com/blog/the-correct-way-to-use-jquery-with-knockout-js" data-num-posts="10" data-colorscheme="light"></div>
                    
                
            </div>
        </div>
        <script data-main="/js/app.js" src="/js/vendor/require.js"></script>
        <div class="footer">
                <div class="container">
                    <div class="addthis_default_style span12 addthis_32x32_style">
                        <a class="addthis_button_facebook_follow" addthis:userid="tysoncadenhead"></a>
                        <a class="addthis_button_twitter_follow" addthis:userid="tysoncadenhead"></a>
                        <a class="addthis_button_linkedin_follow" addthis:userid="tysoncadenhead"></a>
                        <a class="addthis_button_google_follow" addthis:userid="tysoncadenhead"></a>
                        <a class="addthis_button_youtube_follow" addthis:userid="tysoncadenhead"></a>
                        <a class="addthis_button_flickr_follow" addthis:userid="tysonlloydcadenhead"></a>
                        <a class="addthis_button_instagram_follow" addthis:userid="112101485541389007178"></a>
                    </div>
                    <div class="span12" id="twitter-feed">
                        <a class="twitter-timeline" href="https://twitter.com/tysoncadenhead" data-widget-id="377141114454564864">Tweets by @tysoncadenhead</a>
                        <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+"://platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
                        <script type="text/javascript">
                            window.tysonJS = {
                                slug: ''
                            };
                        </script>
                    </div>
                </div>
        </div>
    </body>
</html>